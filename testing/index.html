<!DOCTYPE html>
<html lang=en-QC-2sbs>
<meta charset="utf-8">

<script src=../parse.js></script>

<script src=test.js></script>
<script src=draw.js></script>
<link rel=stylesheet href=style.css>

<button onclick="run()">run tests</button>
<hr>
<div id=$output></div>

<script>
	function run() {
		Test.run_all()
		$output.replaceChildren(Test.draw_results())
	}
	window.onload = function() {
		Test.load_text($data.nextSibling.textContent)
		run()
	}
</script>

<meta id=$data><![CDATA[
游릴 text
abc
游릴 {"type":"ROOT","tag":"","content":["abc"]}

游릴 should fail
abcb
游릴 {"type":"ROOT","tag":"","content":["abc"]}

游릴	italic
/italic/
游릴 {"type":"ROOT","tag":"","content":[{"type":"italic","tag":"/","content":["italic"]}]}

游릴 unclosed italic
/italic
游릴 {"type":"ROOT","tag":"","content":["/","italic"]}

游릴 table
| one | two |
|[2x] oatmeal |
游릴 {"type":"ROOT","tag":"","content":[{"type":"table","tag":"","content":[{"type":"table_row","tag":"","content":[{"type":"table_cell","tag":"| ","content":["one"],"args":{}},{"type":"table_cell","tag":" ","content":["two"],"args":{}}]},{"type":"table_row","tag":"","content":[{"type":"table_cell","tag":" |\n|[2x] ","content":["oatmeal"],"args":{"colspan":2}}]}]}]}

游릴	table (should fail)
| one | two |
|[2x] oatmeal |
游릴 {"type":"ROOT","tag":"","content":[{"type":"table","tag":"","content":[{"type":"table_row","tag":"","content":[{"type":"table_cell","tag":"| ","content":["one"],"args":{}},{"type":"table_cell","tag":" ","content":["two"],"args":{}}]},{"type":"table_row","tag":"","content":[{"type":"table_cell","tag":" |\n|[2x] ","content":["oatmeal"],"args":{"colspan":2, "rowspan":1}}]}]}]}
)

游릴	table (should fail)
| one | two |
|[2x] oatmeal |
游릴 {"type":"ROOT","tag":"","content":[{"type":"table","tag":"","content":[{"type":"table_row","tag":"","content":[{"type":"table_cell","tag":"| ","content":["one"],"args":{}},{"type":"table_cell","tag":" ","content":["two"],"args":{}}]},{"type":"table_row","tag":"","content":[{"type":"table_cell","tag":" |\n|[2x] ","content":["oatmeal"],"args":{"colspan":"2"}}]}]}]}

游릴 empty

游릴 {"type":"ROOT","tag":"","content":[]}

游릴 one newline


游릴	{"type":"ROOT","tag":"","content":[true]}

游릴 link
https://example.com
游릴	{"type":"ROOT","tag":"","content":[{"type":"simple_link","tag":"https://example.com","args":{"url":"https://example.com","text":"https://example.com"}}]}

游릴 link with label
https://example.com[heck]
游릴 {"type":"ROOT","tag":"","content":[{"type":"simple_link","tag":"https://example.com[heck]","args":{"url":"https://example.com","text":"heck"}}]}

游릴 link with empty args
https://example.com[]
游릴 {"type":"ROOT","tag":"","content":[{"type":"simple_link","tag":"https://example.com[]","args":{"url":"https://example.com","text":"https://example.com"}}]}

游릴 link with blank label
https://example.com[=]
游릴 {"type":"ROOT","tag":"","content":[{"type":"simple_link","tag":"https://example.com[=]","args":{"url":"https://example.com","text":""}}]}

游릴 link with blank label 2
https://example.com[;]
游릴 {"type":"ROOT","tag":"","content":[{"type":"simple_link","tag":"https://example.com[;]","args":{"url":"https://example.com","text":""}}]}
