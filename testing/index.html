<!DOCTYPE html>
<html lang=en-QC-2sbs>
<meta charset="utf-8">
<title>Markup2 Tests</title>

<script src=../parse.js></script>

<script src=test.js></script>
<script src=draw.js></script>
<link rel=stylesheet href=style.css>

<button onclick="run()">run tests</button>
<hr>
<div id=$output></div>

<script>
	function run() {
		Test.run_all()
		$output.replaceChildren(Test.draw_results())
	}
	window.onload = function() {
		Test.load_text($data.textContent)
		run()
	}
</script>

<plaintext hidden id=$data></plaintext>
游릴 123
### heading
the `sand` can /be/ eaten
```
code block
```
游릴 {"type":"ROOT","tag":"","content":[{"type":"heading","tag":"### ","content":["heading"],"args":{"level":3}},"the ",{"type":"icode","tag":"`sand`","args":{"text":"sand"}}," can ",{"type":"italic","tag":"/","content":["be"]}," eaten","\n",{"type":"code","tag":"```code block```","args":{"text":"code block\n"}}]}

游릴 123
|table|
游릴 {"type":"ROOT","tag":"","content":[{"type":"table","tag":"","content":[{"type":"table_row","tag":"","content":[{"type":"table_cell","tag":"|","content":["table"],"args":{}}]}]}]}

游릴 123
|[red] hack|
游릴 {"type":"ROOT","tag":"","content":[{"type":"table","tag":"","content":[{"type":"table_row","tag":"","content":[{"type":"table_cell","tag":"|[red] ","content":["hack"],"args":{"color":"red"}}]}]}]}

游릴 123
|[red] hack|a
bcdefa
游릴 {"type":"ROOT","tag":"","content":[{"type":"table","tag":"","content":[{"type":"table_row","tag":"","content":[{"type":"table_cell","tag":"|[red] ","content":["hack"],"args":{"color":"red"}}]}]},"a","\n","bcdefa"]}

游릴 unclosed icode
`eabcn
游릴 {"type":"ROOT","tag":"","content":[{"type":"icode","tag":"`eabcn","args":{"text":"eabcn"}}]}

游릴 image embed
!https://example.com
游릴 {"type":"ROOT","tag":"","content":[{"type":"image","tag":"!https://example.com","args":{"url":"https://example.com"}}]}

游릴 audio embed
!https://example.com[audio]
游릴 {"type":"ROOT","tag":"","content":[{"type":"audio","tag":"!https://example.com[audio]","args":{"url":"https://example.com"}}]}

游릴 video embed
!https://example.mp4
游릴 {"type":"ROOT","tag":"","content":[{"type":"video","tag":"!https://example.mp4","args":{"url":"https://example.mp4"}}]}

游릴 fake header
##### test
游릴 {"type":"ROOT","tag":"","content":["##### test"]}

游릴 h2
## test
游릴 {"type":"ROOT","tag":"","content":[{"type":"heading","tag":"## ","content":["test"],"args":{"level":2}}]}

游릴 table in env
\{|table|}
游릴 {"type":"ROOT","tag":"","content":[{"type":"table","tag":"","content":[{"type":"table_row","tag":"","content":[{"type":"table_cell","tag":"|","content":["table"],"args":{}}]}]}]}

游릴 not table
a |table|
游릴 {"type":"ROOT","tag":"","content":["a"," |","table","|"]}

游릴 single bar
|
a|
游릴 {"type":"ROOT","tag":"","content":["|","\n","a","|"]}

游릴 single backslash
\
游릴 {"type":"ROOT","tag":"","content":["\\"]}

游릴 esc newline
\

游릴 {"type":"ROOT","tag":"","content":["\n"]}

游릴 esc newline no table
\
|table|
游릴 {"type":"ROOT","tag":"","content":["\n","|","table","|"]}

游릴 random escapes
\\ \@ \~
游릴 {"type":"ROOT","tag":"","content":["\\"," ","@"," ","~"]}

游릴 env with body
\sub{
abc
\sub[a]{
abc}
}
游릴 {"type":"ROOT","tag":"","content":[{"type":"subscript","tag":"\\env{","content":["abc","\n",{"type":"subscript","tag":"\\env[a]{","content":["abc"],"body":true}],"body":true}]}

游릴 curly brackets
}
{}}{]{_}{}{}{}{
游릴 {"type":"ROOT","tag":"","content":["}","\n","{","}","}","{]{_","}","{","}","{","}","{","}","{"]}

游릴 empty

游릴 {"type":"ROOT","tag":"","content":[]}

游릴 newline


游릴 {"type":"ROOT","tag":"","content":["\n"]}

游릴 quotes
> hecko
>[] uuw
>{haa}
游릴 {"type":"ROOT","tag":"","content":[{"type":"quote","tag":"> ","content":["hecko"],"args":{}},{"type":"quote","tag":">[] ","content":["uuw"],"args":{}},{"type":"quote","tag":">{","content":["haa"],"body":true,"args":{}}]}

游릴 not quotes
>:(
>abc
heck > abc
aa >{dwz}
>[]abc
游릴 {"type":"ROOT","tag":"","content":[">:(","\n",">abc","\n","heck > abc","\n","aa >{dwz","}","\n",">[]abc"]}

游릴 weird url args
http://example.com[]
http://example.com[
http://example.com[a]
http://example.com[=]
http://example.com[;]
http://example.com[a=1]
游릴 {"type":"ROOT","tag":"","content":[{"type":"simple_link","tag":"http://example.com[]","args":{"url":"http://example.com"}},"\n",{"type":"simple_link","tag":"http://example.com","args":{"url":"http://example.com"}},"[","\n",{"type":"simple_link","tag":"http://example.com[a]","args":{"url":"http://example.com","text":"a"}},"\n",{"type":"simple_link","tag":"http://example.com[=]","args":{"url":"http://example.com","text":""}},"\n",{"type":"simple_link","tag":"http://example.com[;]","args":{"url":"http://example.com","text":""}},"\n",{"type":"simple_link","tag":"http://example.com[a=1]","args":{"url":"http://example.com"}}]}

游릴 dividers
---

--
-------
 ---
--- 
---\
----
- --- 
a
\{---
^ is that correct?
游릴 {"type":"ROOT","tag":"","content":[{"type":"divider","tag":"---"},"\n","--","\n",{"type":"divider","tag":"-------"}," ---","\n","--- ","\n","---","\n","----","\n","- --- ","\n","a","\n",{"type":"divider","tag":"---"},"^ is that correct?"]}

游릴 env missing body
\sup
\sup[]a
\sup.
游릴 {"type":"ROOT","tag":"","content":["\\sup","\n","\\sup[]a","\n","\\sup."]}

游릴 env word
abc\sup abc
abc\sup 
abc\sup qwe\{}rty
游릴 {"type":"ROOT","tag":"","content":["abc",{"type":"superscript","tag":"\\sup abc","content":["abc"],"body":true},"\n","abc",{"type":"superscript","tag":"\\sup ","content":[],"body":true},"\n","abc",{"type":"superscript","tag":"\\sup qwe","content":["qwe"],"body":true},"rty"]}

游릴 ``` code blocks
```
normal
codeblock
abc
```
``` c++ 11 
lang
aaa
```
```inline```
```js
no lb```
```

blank lines

```
not at start ```abc```
```
end not at start
heck```abc
```
unclosed

游릴 {"type":"ROOT","tag":"","content":[{"type":"code","tag":"```\nnormal\ncodeblock\nabc\n```","args":{"text":"normal\ncodeblock\nabc\n"}},{"type":"code","tag":"``` c++ 11 \nlang\naaa\n```","args":{"text":"lang\naaa\n","lang":"c++ 11"}},{"type":"code","tag":"```inline```","args":{"text":"inline"}},{"type":"code","tag":"```js\nno lb```","args":{"text":"no lb","lang":"js"}},{"type":"code","tag":"```\n\nblank lines\n\n```","args":{"text":"\nblank lines\n\n"}},"not at start ","`","`",{"type":"icode","tag":"`abc`","args":{"text":"abc"}},"`","`","\n",{"type":"code","tag":"```\nend not at start\nheck```","args":{"text":"end not at start\nheck"}},"abc","\n",{"type":"code","tag":"```\nunclosed\n","args":{"text":"unclosed\n"}}]}

游릴 paragraphs
paragraph1

paragraph2
游릴 {"type":"ROOT","tag":"","content":["paragraph1","\n","\n","paragraph2"]}

游릴 heading spacing
some text idk

# heading

some more text
## heading
yeah
游릴 {"type":"ROOT","tag":"","content":["some text idk","\n","\n",{"type":"heading","tag":"# ","content":["heading"],"args":{"level":1}},"\n","some more text","\n",{"type":"heading","tag":"## ","content":["heading"],"args":{"level":2}},"yeah"]}

游릴 keys
\key abc
\key a b
\key c\key c \key c
游릴 {"type":"ROOT","tag":"","content":[{"type":"key","tag":"\\key abc","content":["abc"],"body":true},"\n",{"type":"key","tag":"\\key a ","content":["a"],"body":true},"b","\n",{"type":"key","tag":"\\key c","content":["c"],"body":true},{"type":"key","tag":"\\key c ","content":["c"],"body":true},{"type":"key","tag":"\\key c","content":["c"],"body":true}]}

游릴 align
\align[right] test
\align heck
\align[
\align[]
\align[] d
\align[] ddd
\align[aaa
\align[aaa{}
游릴 {"type":"ROOT","tag":"","content":[{"type":"align","tag":"\\align[right] test","content":["test"],"body":true,"args":{"align":"right"}},{"type":"align","tag":"\\align heck","content":["heck"],"body":true,"args":{"align":"center"}},{"type":"align","tag":"\\align[","content":["["],"body":true,"args":{"align":"center"}},{"type":"align","tag":"\\align[]","content":[],"args":{"align":"center"}},{"type":"align","tag":"\\align[] d","content":["d"],"body":true,"args":{"align":"center"}},{"type":"align","tag":"\\align[] ddd","content":["ddd"],"body":true,"args":{"align":"center"}},{"type":"align","tag":"\\align[aaa","content":["[aaa"],"body":true,"args":{"align":"center"}},{"type":"align","tag":"\\align[aaa{}","content":["[aaa{","}"],"body":true,"args":{"align":"center"}}]}

游릴 stuff


|[gray] abc |[blue] abc | `test` 
!https://qcs.shsbs.xyz/api/file/raw/31760?size=30&crop=true
the sand can be eatena
	abc
\spoiler abc defaaaa \spoiler a
aaaaaa
\align[right] heck
\align | table |
---
\key{\key a\key b
\key ctrl\abcdef[aaa]{ ha}
\key shift
\key ctrl+\key shift+\key M}
\spoiler abc
/test
a/
`abc
def`

游릴 {"type":"ROOT","tag":"","content":["\n","\n",{"type":"table","tag":"","content":[{"type":"table_row","tag":"","content":[{"type":"table_cell","tag":"|[gray] ","content":["abc"],"args":{"color":"gray"}},{"type":"table_cell","tag":"[blue] ","content":["abc"],"args":{"color":"blue"}}]}]}," ",{"type":"icode","tag":"`test`","args":{"text":"test"}}," ","\n",{"type":"image","tag":"!https://qcs.shsbs.xyz/api/file/raw/31760?size=30&crop=true","args":{"url":"https://qcs.shsbs.xyz/api/file/raw/31760?size=30&crop=true"}},"the sand can be eatena","\n","\tabc","\n",{"type":"spoiler","tag":"\\spoiler","content":["abc defaaaa ",{"type":"spoiler","tag":"\\spoiler","content":["a"],"args":{"label":"spoiler"}}],"args":{"label":"spoiler"}},"aaaaaa","\n",{"type":"align","tag":"\\align[right]","content":["heck"],"args":{"align":"right"}},{"type":"align","tag":"\\align","content":["| ","table"," |"],"args":{"align":"center"}},{"type":"divider","tag":"---"},{"type":"key","tag":"\\key{","content":[{"type":"key","tag":"\\key a","content":["a"],"body":true},{"type":"key","tag":"\\key b","content":["b"],"body":true},"\n",{"type":"key","tag":"\\key ctrl","content":["ctrl"],"body":true},{"type":"invalid","tag":"\\abcdef[aaa]{","content":[" ha","}"],"body":true,"args":{"text":"\\abcdef[aaa]{","reason":"invalid tag"}},"\n",{"type":"key","tag":"\\key shift","content":["shift"],"body":true},"\n",{"type":"key","tag":"\\key ctrl","content":["ctrl"],"body":true},"+",{"type":"key","tag":"\\key shift","content":["shift"],"body":true},"+",{"type":"key","tag":"\\key M","content":["M"],"body":true}],"body":true},"\n",{"type":"spoiler","tag":"\\spoiler","content":["abc"],"args":{"label":"spoiler"}},"/","test","\n","a","/","\n",{"type":"icode","tag":"`abc","args":{"text":"abc"}},"\n","def","`","\n","\n"]}

游릴 idk..env close
>{
\spoiler abc}heck
游릴 {"type":"ROOT","tag":"","content":[{"type":"quote","tag":">{","content":[{"type":"spoiler","tag":"\\spoiler ","content":["abc"],"args":{"label":"spoiler"}}],"body":true,"args":{}},"heck"]}
