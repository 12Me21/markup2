<!DOCTYPE html>
<html lang=en-QC-2sbs>
<meta charset="utf-8">
<title>Markup2 Tests</title>

<script src=../parse.js></script>

<script src=test.js></script>
<script src=draw.js></script>
<link rel=stylesheet href=style.css>

<button onclick="run()">run tests</button>
<hr>
<div id=$output></div>

<script>
	function run() {
		Test.run_all()
		$output.replaceChildren(Test.draw_results())
	}
	window.onload = function() {
		Test.load_text($data.textContent)
		run()
	}
</script>

<!-- plaintext goes until EOF, i put a fake closing tag
so it doesn't get indented -->
<plaintext hidden id=$data></plaintext>
游릴 123
### heading
the `sand` can /be/ eaten
```
code block
```
游릴 {"type":"ROOT","content":[{"type":"heading","content":["heading"],"args":{"level":3}},"the ",{"type":"icode","args":{"text":"sand"}}," can ",{"type":"italic","content":["be"]}," eaten","\n",{"type":"code","args":{"text":"code block\n"}}]}

游릴 123
|table|
游릴 {"type":"ROOT","content":[{"type":"table","content":[{"type":"table_row","content":[{"type":"table_cell","content":["table"],"args":{}}]}]}]}

游릴 123
|[red] hack|
游릴 {"type":"ROOT","content":[{"type":"table","content":[{"type":"table_row","content":[{"type":"table_cell","content":["hack"],"args":{"color":"red"}}]}]}]}

游릴 123
|[red] hack|a
bcdefa
游릴 {"type":"ROOT","content":[{"type":"table","content":[{"type":"table_row","content":[{"type":"table_cell","content":["hack"],"args":{"color":"red"}}]}]},"a","\n","bcdefa"]}

游릴 unclosed icode
`eabcn
游릴 {"type":"ROOT","content":[{"type":"icode","args":{"text":"eabcn"}}]}

游릴 image embed
!https://example.com
游릴 {"type":"ROOT","content":[{"type":"image","args":{"url":"https://example.com"}}]}

游릴 audio embed
!https://example.com[audio]
游릴 {"type":"ROOT","content":[{"type":"audio","args":{"url":"https://example.com"}}]}

游릴 video embed
!https://example.mp4
游릴 {"type":"ROOT","content":[{"type":"video","args":{"url":"https://example.mp4"}}]}

游릴 fake header
##### test
游릴 {"type":"ROOT","content":["##### test"]}

游릴 h2
## test
游릴 {"type":"ROOT","content":[{"type":"heading","content":["test"],"args":{"level":2}}]}

游릴 table in env
\{|table|}
游릴 {"type":"ROOT","content":[{"type":"table","content":[{"type":"table_row","content":[{"type":"table_cell","content":["table"],"args":{}}]}]}]}

游릴 not table
a |table|
游릴 {"type":"ROOT","content":["a"," |","table","|"]}

游릴 single bar
|
a|
游릴 {"type":"ROOT","content":["|","\n","a","|"]}

游릴 single backslash
\
游릴 {"type":"ROOT","content":["\\"]}

游릴 esc newline
\

游릴 {"type":"ROOT","content":["\n"]}

游릴 esc newline no table
\
|table|
游릴 {"type":"ROOT","content":["\n","|","table","|"]}

游릴 random escapes
\\ \@ \~
游릴 {"type":"ROOT","content":["\\"," ","@"," ","~"]}

游릴 env with body
\sub{
abc
\sub[a]{
abc}
}
游릴 {"type":"ROOT","content":[{"type":"subscript","content":["abc","\n",{"type":"subscript","content":["abc"]}]}]}

游릴 curly brackets
}
{}}{]{_}{}{}{}{
游릴 {"type":"ROOT","content":["}","\n","{","}","}","{]{_","}","{","}","{","}","{","}","{"]}

游릴 empty

游릴 {"type":"ROOT","content":[]}

游릴 newline


游릴 {"type":"ROOT","content":["\n"]}

游릴 quotes
> hecko
>[] uuw
>{haa}
游릴 {"type":"ROOT","content":[{"type":"quote","content":["hecko"],"args":{}},{"type":"quote","content":["uuw"],"args":{}},{"type":"quote","content":["haa"],"args":{}}]}

游릴 not quotes
>:(
>abc
heck > abc
aa >{dwz}
>[]abc
游릴 {"type":"ROOT","content":[">:(","\n",">abc","\n","heck > abc","\n","aa >{dwz","}","\n",">[]abc"]}

游릴 weird url args
http://example.com[]
http://example.com[
http://example.com[a]
http://example.com[=]
http://example.com[;]
http://example.com[a=1]
游릴 {"type":"ROOT","content":[{"type":"simple_link","args":{"url":"http://example.com"}},"\n",{"type":"simple_link","args":{"url":"http://example.com"}},"[","\n",{"type":"simple_link","args":{"url":"http://example.com","text":"a"}},"\n",{"type":"simple_link","args":{"url":"http://example.com","text":""}},"\n",{"type":"simple_link","args":{"url":"http://example.com","text":""}},"\n",{"type":"simple_link","args":{"url":"http://example.com"}}]}

游릴 dividers
---

--
-------
 ---
--- 
---\
----
- --- 
a
\{---
^ is that correct?
游릴 {"type":"ROOT","content":[{"type":"divider"},"\n","--","\n",{"type":"divider"}," ---","\n","--- ","\n","---","\n","----","\n","- --- ","\n","a","\n",{"type":"divider"},"^ is that correct?"]}

游릴 env missing body
\sup
\sup[]a
\sup.
游릴 {"type":"ROOT","content":["\\sup","\n","\\sup[]a","\n","\\sup."]}

游릴 env word
abc\sup abc
abc\sup 
abc\sup qwe\{}rty
游릴 {"type":"ROOT","content":["abc",{"type":"superscript","content":["abc"]},"\n","abc",{"type":"superscript","content":[]},"\n","abc",{"type":"superscript","content":["qwe"]},"rty"]}

游릴 ``` code blocks
```
normal
codeblock
abc
```
``` c++ 11 
lang
aaa
```
```inline```
```js
no lb```
```

blank lines

```
not at start ```abc```
```
end not at start
heck```abc
```
unclosed

游릴 {"type":"ROOT","content":[{"type":"code","args":{"text":"normal\ncodeblock\nabc\n"}},{"type":"code","args":{"text":"lang\naaa\n","lang":"c++ 11"}},{"type":"code","args":{"text":"inline"}},{"type":"code","args":{"text":"no lb","lang":"js"}},{"type":"code","args":{"text":"\nblank lines\n\n"}},"not at start ","`","`",{"type":"icode","args":{"text":"abc"}},"`","`","\n",{"type":"code","args":{"text":"end not at start\nheck"}},"abc","\n",{"type":"code","args":{"text":"unclosed\n"}}]}

游릴 paragraphs
paragraph1

paragraph2
游릴 {"type":"ROOT","content":["paragraph1","\n","\n","paragraph2"]}

游릴 heading spacing
some text idk

# heading

some more text
## heading
yeah
游릴 {"type":"ROOT","content":["some text idk","\n","\n",{"type":"heading","content":["heading"],"args":{"level":1}},"\n","some more text","\n",{"type":"heading","content":["heading"],"args":{"level":2}},"yeah"]}

游릴 keys, word parsing
\key abc
\key a b
\key c\key c \key c
游릴 {"type":"ROOT","content":[{"type":"key","content":["abc"]},"\n",{"type":"key","content":["a"]}," b","\n",{"type":"key","content":["c"]},{"type":"key","content":["c"]}," ",{"type":"key","content":["c"]}]}

游릴 align
\align[right] test
\align heck
\align[
\align[]
\align[] d
\align[] ddd
\align[aaa
\align[aaa{}
游릴 {"type":"ROOT","content":[{"type":"align","content":["test"],"args":{"align":"right"}},{"type":"align","content":["heck"],"args":{"align":"center"}},{"type":"align","content":["["],"args":{"align":"center"}},{"type":"align","content":[],"args":{"align":"center"}},{"type":"align","content":["d"],"args":{"align":"center"}},{"type":"align","content":["ddd"],"args":{"align":"center"}},{"type":"align","content":["[aaa"],"args":{"align":"center"}},{"type":"align","content":["[aaa{","}"],"args":{"align":"center"}}]}

游릴 stuff


|[gray] abc |[blue] abc | `test` 
!https://qcs.shsbs.xyz/api/file/raw/31760?size=30&crop=true
the sand can be eatena
	abc
\spoiler abc defaaaa \spoiler a
aaaaaa
\align[right] heck
\align | table |
---
\key{\key a\key b
\key ctrl\abcdef[aaa]{ ha}
\key shift
\key ctrl+\key shift+\key M}
\spoiler abc
/test
a/
`abc
def`

游릴 {"type":"ROOT","content":["\n","\n",{"type":"table","content":[{"type":"table_row","content":[{"type":"table_cell","content":["abc"],"args":{"color":"gray"}},{"type":"table_cell","content":["abc"],"args":{"color":"blue"}}]}]}," ",{"type":"icode","args":{"text":"test"}}," ","\n",{"type":"image","args":{"url":"https://qcs.shsbs.xyz/api/file/raw/31760?size=30&crop=true"}},"the sand can be eatena","\n","\tabc","\n",{"type":"spoiler","content":["abc defaaaa ",{"type":"spoiler","content":["a"],"args":{"label":"spoiler"}}],"args":{"label":"spoiler"}},"aaaaaa","\n",{"type":"align","content":["heck"],"args":{"align":"right"}},{"type":"align","content":["| ","table"," |"],"args":{"align":"center"}},{"type":"divider"},{"type":"key","content":[{"type":"key","content":["a"]},{"type":"key","content":["b"]},"\n",{"type":"key","content":["ctrl"]},{"type":"invalid","content":[" ha","}"],"args":{"text":"\\abcdef[aaa]{","reason":"invalid tag"}},"\n",{"type":"key","content":["shift"]},"\n",{"type":"key","content":["ctrl"]},"+",{"type":"key","content":["shift"]},"+",{"type":"key","content":["M"]}]},"\n",{"type":"spoiler","content":["abc"],"args":{"label":"spoiler"}},"/","test","\n","a","/","\n",{"type":"icode","args":{"text":"abc"}},"\n","def","`","\n","\n"]}

游릴 idk..env close
>{
\spoiler abc}heck
游릴 {"type":"ROOT","content":[{"type":"quote","content":[{"type":"spoiler","content":["abc"],"args":{"label":"spoiler"}}],"args":{}},"heck"]}

游릴 spit it out
/abc
}def/
游릴 {"type":"ROOT","content":["/","abc","\n","}","def","/"]}
